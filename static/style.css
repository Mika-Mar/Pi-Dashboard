/* ===== Theme ===== */
:root{
  --bg: #0b0d10;
  --fg: #e7ebf0;
  --muted: #a6b0bb;
  --card: rgba(255,255,255,.06);
  --accent: rgb(34 197 94);        /* wird per JS überschrieben */
  --accent-10: rgba(34,197,94,.10);
  --accent-20: rgba(34,197,94,.20);
  --on-accent: #fff;
  --radius: 16px;
}

/* ===== Base ===== */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--fg); background:var(--bg);
  font: 500 14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}
#bg, #bgOverlay{
  position: fixed; inset: 0; pointer-events: none;
}
#bg{ background: radial-gradient(120% 80% at 0% 0%, #0b0d10, #0a0b0e 60%, #07090c 100%); }
#bgOverlay{
  background-image:
    radial-gradient(120% 80% at 10% 0%, var(--accent-10), transparent 60%),
    radial-gradient(120% 80% at 90% 100%, var(--accent-20), transparent 60%);
  filter: blur(0.0001px); /* forces proper compositing on some GPUs */
}
#wrap{
  position: relative;
  max-width: 1024px;
  margin: 0 auto;
  padding: 10px 0 18px; /* remove side padding so slides fill the wrap */
  
  overflow: hidden; /* hide off-screen slides to prevent bleed on wide screens */
}

/* ===== Top-Bar ===== */
#top{
  display:grid; grid-template-columns: 1fr auto 1fr; align-items:center;
  gap: 8px; margin: 4px 0 8px; padding: 0 14px;
}

#titleBlock{ text-align:center; }
#titleText{ font-weight:700; font-size:18px; letter-spacing:.2px; }
.muted{ color:var(--muted); }
#clock{ justify-self:end; font-weight:600; }

/* ===== Pager Dots ===== */
#pager{
  --accent: white;
  --on-accent: accent;
  display:flex; gap:.35rem; justify-content:center; margin:.35rem 0 .6rem; padding: 0 14px; }
#pager .dot{
  width:8px; height:8px; border-radius:999px; opacity:.45; border:0;
  background:var(--accent); padding:0; cursor:pointer;
  box-shadow:
    0 0  2px var(--on-accent);
}
#pager .dot.active{ opacity:1; transform:scale(1.2); }

/* ===== Carousel ===== */
#dashWrap{
  overflow:hidden;
  touch-action: pan-y;
  position: relative; /* allow slides to layer above one another */
  display: flex;
  transition: transform .4s ease;
}
.dash{
  width:100%;
  padding: 8px;
  flex: 0 0 100%;
}

.dash{
  display:none;
  width:100%;
  padding: 8px;
}
.dash.active{
  display:block;
}




/* ===== Player ===== */
.eq {
  /* dynamisch via JS */
  --accent: #22c55e;                    /* Hauptfarbe (wird gesetzt) */
  --bar-dim: rgba(34,197,94,.35);    /* Glow / Schatten */
  --on-accent:  rgba(0,0,0,.65);     /* Outline (wird gesetzt) */
  --bar-glow: rgba(34,197,94,.35);   /* weicher Glow (wird gesetzt) */

  display: flex;
  align-items: flex-end;
  gap: 3px;
  height: 20px;
  position: relative; /* für ::before/::after der Bars */
}

.eq span {
  position: relative;
  width: 4px;
  height: 10%;
  border-radius: 4px;
  background: var(--accent);
  /* Sichtbarkeit: feine Outline + weicher Glow */
  box-shadow:
    0 0  1px var(--on-accent),
    0 2px 10px var(--accent-10);
  will-change: height;
  contain: paint;
}

/* dezente Innenkanten (oben leicht heller, unten minimal dunkler) */
.eq span::before {
  content: "";
  position: absolute; inset: 0;
  border-radius: inherit;
  box-shadow:
    inset 0 1px 0 color-mix(in srgb, var(--accent) 80%, white),
    inset 0 -1px 0 color-mix(in srgb, var(--accent) 85%, black);
  opacity: .6;
  pointer-events: none;
}

/* OPTIONAL: Hauch von Textur (einfach einkommentieren, wenn gewünscht) */
.eq span::after {
  content: "";
  position: absolute; inset: 0;
  border-radius: inherit;
  background:
    repeating-linear-gradient(0deg,
      rgba(255,255,255,.08) 0 2px,
      rgba(255,255,255,0)   2px 4px);
  opacity: .2;
  pointer-events: none;
}

.eq span:nth-child(1) { animation: eq1 1.1s infinite ease-in-out; }
.eq span:nth-child(2) { animation: eq2 0.9s  infinite ease-in-out; }
.eq span:nth-child(3) { animation: eq3 1.3s  infinite ease-in-out; }
.eq span:nth-child(4){ animation: eq1 0.9s  infinite ease-in-out; }
.eq span:nth-child(5){ animation: eq3 1.1s infinite ease-in-out; }

@keyframes eq1 { 0%,100%{height:20%} 30%{height:90%} 60%{height:50%} }
@keyframes eq2 { 0%,100%{height:40%} 25%{height:80%} 50%{height:30%} 75%{height:100%} }
@keyframes eq3 { 0%,100%{height:10%} 20%{height:60%} 50%{height:100%} 80%{height:40%} }

/* Pause-Zustand – fix: auf span zielen, nicht .bar */
.eq-text.paused span {
  animation-play-state: paused !important; /* falls woanders animation gesetzt wird */
  opacity: .55;
}

#player{
  display:flex; flex-direction: column; gap: 10px; padding: 4px 0; align-items:center;
}

#coverWrap{ width: min(72vw, 320px);     /* auf 7" ~ max 320px */
  aspect-ratio: 1/1;
}
#cover{
  width:100%; height:100%;
  object-fit: cover;
  border-radius: var(--radius);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.cover--loading{ opacity:.85; filter:saturate(.8); }

#meta{ width: min(92vw, 520px);
  display: grid;
  grid-template-rows: auto auto auto auto;
  gap: 8px;}
#progress{
  position:relative; width:100%; height:8px;
  background:rgba(255,255,255,.09);
  border-radius:99px; overflow:hidden;
}
#progress .fill{
  position:absolute; left:0; top:0; bottom:0;
  width:0%;
  background: #fff;
  will-change: width;
}

#times{ display:flex; justify-content:space-between;
  font-variant-numeric: tabular-nums;
  color:var(--muted);
}

#controls{ display:flex; gap:10px; align-items:center; justify-content:center; }
#controls button{
  appearance:none; border:0; border-radius: 999px; cursor:pointer;
  background: var(--card); color: var(--fg);
  padding:10px 14px; font-weight:700;
  transition: transform .12s ease, background .2s ease;
}
#controls button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.12); }
#btnPlay{ background: var(--accent); color: var(--on-accent); }
#btnPlay.is-playing{ filter: saturate(.9) brightness(.95); }

/* ===== Tiles (System/Pi-hole/Wetter) ===== */
.tiles{ display:grid; grid-template-columns: 1fr; gap:.6rem; }
@media (min-width: 700px){ .tiles{ grid-template-columns: 1fr 1fr; } }
.tile{
  background: var(--card); backdrop-filter: blur(6px);
  padding: .7rem .9rem; border-radius: var(--radius);
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
}

#bg,
#bgOverlay,
#bgOverlay::before {
  z-index: 0;          /* background base */
}

#wrap,
#sysDash {
  position: relative;
  z-index: 10;         /* content above background */
}

#sysDash {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--bg); /* ensure system slide text isn't obscured */
}

#sysCenter {
  text-align: center;
  color: #fff;
  font-size: 48px;
  line-height: 1.2;
}

#sysCenter input {
  background: var(--card);
  color: var(--fg);
  border: none;
  border-radius: var(--radius);
  padding: .4rem .6rem;
}

#sysCenter .sysLine {
  margin: 10px 0;
}

:root{
  --bg-url: none; /* wird per JS gesetzt: url("...") */
}

/* Cover als eigene Ebene, damit deine Gradients auf #bgOverlay erhalten bleiben */
#bgOverlay{
  position: fixed; inset: 0; pointer-events: none;
  /* deine Gradients bleiben hier wie gehabt */
}

#bgOverlay::before{
  content:"";
  position:absolute;
  inset:-8%;                           /* Rand überziehen, damit der Blur nicht an Kanten klippt */
  background-image: var(--bg-url);     /* kommt aus JS */
  background-size: cover;
  background-position: center;
  filter: blur(28px) saturate(1.2) brightness(0.6);
  transform: scale(1.12);              /* leichter Grund-Zoom */
  transform-origin: center;
  opacity: .9;
  transition: opacity .35s ease, filter .35s ease, transform .35s ease;
  will-change: transform, filter, opacity;
  pointer-events: none;                /* allow underlying interfaces to remain clickable */

}

/* Zoom-Animation beim Trackwechsel */
#bgOverlay.bg-zoom::before{
  animation: bgKen 16s ease-out forwards;
}

@keyframes bgKen{
  from { transform: scale(1.22); }
  to   { transform: scale(1.10); }
}

/* ===== Utility ===== */
.hidden{ display:none !important; }
